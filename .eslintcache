[{"C:\\Users\\Дима\\news-explorer-frontend\\src\\index.js":"1","C:\\Users\\Дима\\news-explorer-frontend\\src\\components\\App\\App.js":"2","C:\\Users\\Дима\\news-explorer-frontend\\src\\components\\About\\About.js":"3","C:\\Users\\Дима\\news-explorer-frontend\\src\\components\\Footer\\Footer.js":"4","C:\\Users\\Дима\\news-explorer-frontend\\src\\components\\Header\\Header.js":"5","C:\\Users\\Дима\\news-explorer-frontend\\src\\components\\Navigation\\Navigation.js":"6","C:\\Users\\Дима\\news-explorer-frontend\\src\\components\\SearchForm\\SearchForm.js":"7","C:\\Users\\Дима\\news-explorer-frontend\\src\\components\\Main\\Main.js":"8","C:\\Users\\Дима\\news-explorer-frontend\\src\\components\\Preloader\\Preloader.js":"9","C:\\Users\\Дима\\news-explorer-frontend\\src\\components\\NewsCardList\\NewsCardList.js":"10","C:\\Users\\Дима\\news-explorer-frontend\\src\\components\\NewsCard\\NewsCard.js":"11","C:\\Users\\Дима\\news-explorer-frontend\\src\\components\\NotFound\\NotFound.js":"12","C:\\Users\\Дима\\news-explorer-frontend\\src\\components\\SavedNews\\SavedNews.js":"13","C:\\Users\\Дима\\news-explorer-frontend\\src\\components\\SavedNewsHeader\\SavedNewsHeader.js":"14","C:\\Users\\Дима\\news-explorer-frontend\\src\\components\\PopupWithForm\\PopupWithForm.js":"15","C:\\Users\\Дима\\news-explorer-frontend\\src\\components\\Login\\Login.js":"16","C:\\Users\\Дима\\news-explorer-frontend\\src\\components\\Register\\Register.js":"17","C:\\Users\\Дима\\news-explorer-frontend\\src\\components\\InfoPopup\\InfoPopup.js":"18","C:\\Users\\Дима\\news-explorer-frontend\\src\\utils\\cards.js":"19","C:\\Users\\Дима\\news-explorer-frontend\\src\\utils\\MainApi.js":"20","C:\\Users\\Дима\\news-explorer-frontend\\src\\components\\ProtectedRoute\\ProtectedRoute.js":"21","C:\\Users\\Дима\\news-explorer-frontend\\src\\context\\CurrentUserContext.js":"22","C:\\Users\\Дима\\news-explorer-frontend\\src\\utils\\NewsApi.js":"23","C:\\Users\\Дима\\news-explorer-frontend\\src\\components\\Error\\Error.js":"24"},{"size":325,"mtime":1610189146545,"results":"25","hashOfConfig":"26"},{"size":10029,"mtime":1610704951744,"results":"27","hashOfConfig":"26"},{"size":891,"mtime":1609753725417,"results":"28","hashOfConfig":"26"},{"size":1773,"mtime":1609753657602,"results":"29","hashOfConfig":"26"},{"size":658,"mtime":1610378978878,"results":"30","hashOfConfig":"26"},{"size":3139,"mtime":1610378971135,"results":"31","hashOfConfig":"26"},{"size":1589,"mtime":1610201637212,"results":"32","hashOfConfig":"26"},{"size":1992,"mtime":1610701856506,"results":"33","hashOfConfig":"26"},{"size":325,"mtime":1609780434713,"results":"34","hashOfConfig":"26"},{"size":188,"mtime":1609767827848,"results":"35","hashOfConfig":"26"},{"size":3108,"mtime":1610705211965,"results":"36","hashOfConfig":"26"},{"size":595,"mtime":1609780593424,"results":"37","hashOfConfig":"26"},{"size":1119,"mtime":1610703683695,"results":"38","hashOfConfig":"26"},{"size":800,"mtime":1610704000004,"results":"39","hashOfConfig":"26"},{"size":594,"mtime":1609848037474,"results":"40","hashOfConfig":"26"},{"size":3062,"mtime":1610381494727,"results":"41","hashOfConfig":"26"},{"size":3629,"mtime":1610381498899,"results":"42","hashOfConfig":"26"},{"size":613,"mtime":1610191896560,"results":"43","hashOfConfig":"26"},{"size":2928,"mtime":1609853346744,"results":"44","hashOfConfig":"45"},{"size":2833,"mtime":1610703286971,"results":"46","hashOfConfig":"26"},{"size":241,"mtime":1610191248321,"results":"47","hashOfConfig":"26"},{"size":88,"mtime":1610189368042,"results":"48","hashOfConfig":"26"},{"size":635,"mtime":1610377500129,"results":"49","hashOfConfig":"26"},{"size":474,"mtime":1610380005699,"results":"50","hashOfConfig":"26"},{"filePath":"51","messages":"52","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"53"},"1uxkawf",{"filePath":"54","messages":"55","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"56","usedDeprecatedRules":"53"},{"filePath":"57","messages":"58","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"53"},{"filePath":"59","messages":"60","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"53"},{"filePath":"61","messages":"62","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"53"},{"filePath":"63","messages":"64","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"53"},{"filePath":"65","messages":"66","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"53"},{"filePath":"67","messages":"68","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"53"},{"filePath":"69","messages":"70","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"53"},{"filePath":"71","messages":"72","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"53"},{"filePath":"73","messages":"74","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"53"},{"filePath":"75","messages":"76","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"53"},{"filePath":"77","messages":"78","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"53"},{"filePath":"79","messages":"80","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"53"},{"filePath":"81","messages":"82","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"83","messages":"84","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"53"},{"filePath":"85","messages":"86","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"53"},{"filePath":"87","messages":"88","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"53"},{"filePath":"89","messages":"90","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"91"},"1g8ghre",{"filePath":"92","messages":"93","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"53"},{"filePath":"94","messages":"95","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"53"},{"filePath":"96","messages":"97","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"53"},{"filePath":"98","messages":"99","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"53"},{"filePath":"100","messages":"101","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"53"},"C:\\Users\\Дима\\news-explorer-frontend\\src\\index.js",[],["102","103"],"C:\\Users\\Дима\\news-explorer-frontend\\src\\components\\App\\App.js",["104","105","106"],"import React, { useState, useEffect } from \"react\";\r\nimport { Route, Switch, Redirect, useHistory } from \"react-router-dom\";\r\nimport { CurrentUserContext } from \"../../context/CurrentUserContext\";\r\nimport \"./App.css\";\r\nimport About from \"../About/About\";\r\nimport Footer from \"../Footer/Footer\";\r\nimport Header from \"../Header/Header\";\r\nimport Main from \"../Main/Main\";\r\nimport SavedNewsHeader from \"../SavedNewsHeader/SavedNewsHeader\";\r\nimport SavedNews from \"../SavedNews/SavedNews\";\r\nimport SearchForm from \"../SearchForm/SearchForm\";\r\nimport Login from \"../Login/Login\";\r\nimport Register from \"../Register/Register\";\r\nimport InfoPopup from \"../InfoPopup/InfoPopup\";\r\nimport * as auth from \"../../utils/MainApi\";\r\nimport * as news from \"../../utils/NewsApi\";\r\nimport ProtectedRoute from \"../ProtectedRoute/ProtectedRoute\";\r\nimport Preloader from \"../Preloader/Preloader\";\r\nimport NotFound from \"../NotFound/NotFound\";\r\nimport Error from \"../Error/Error\";\r\n\r\nfunction App() {\r\n  const [isLoginPopupOpen, setIsLoginPopupOpen] = useState(false);\r\n  const [isRegisterPopupOpen, setIsRegisterPopupOpen] = useState(false);\r\n  const [isInfoTooltipOpen, setIsInfoTooltipOpen] = useState(false);\r\n  const [loggedIn, setLoggedIn] = useState(false);\r\n  const [articleSaved, setArticleSaved] = useState([]);\r\n  const [articles, setArticles] = useState([]);\r\n  const [currentUser, setCurrentUser] = useState({});\r\n  const [name, setName] = useState(\"\");\r\n  const [keyword, setKeyword] = useState(\"\");\r\n  const [preloader, setPreloader] = useState(false);\r\n  const [notFound, setNotFound] = useState(false);\r\n  const [error, setError] = useState(false);\r\n  const [errorMessage, setErrorMessage] = useState(\"\");\r\n  const history = useHistory();\r\n\r\n  function handleRegister(password, email, name) {\r\n    auth\r\n      .register(password, email, name)\r\n      .then((res) => {\r\n        if (res.data) {\r\n          setIsRegisterPopupOpen(false);\r\n          setIsInfoTooltipOpen(true);\r\n        } else if (res.message) {\r\n          setErrorMessage(res.message);\r\n        } else {\r\n           setErrorMessage(\"Ошибка сервера. Попробуйте ещё раз!\");\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        if (err === 400) {\r\n          console.log(\"некорректно заполнено одно из полей\");\r\n        }\r\n      });\r\n  }\r\n\r\n    function handleLogin(password, email) {\r\n    auth\r\n      .authorize(password, email)\r\n      .then((data) => {\r\n        if (data.token) {\r\n          setLoggedIn(true);\r\n          setName(name);\r\n          history.push(\"/saved-news\");\r\n        } else if (data.message) {\r\n          setErrorMessage(data.message);\r\n        } else {\r\n           setErrorMessage(\"Ошибка сервера. Попробуйте ещё раз!\");\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        if (err === 400) {\r\n          console.log(\"не передано одно из полей\");\r\n        } else if (err === 401) {\r\n          console.log(\"пользователь с email не найден\");\r\n        }\r\n      });\r\n  }\r\n\r\n  function tokenCheck() {\r\n    const token = localStorage.getItem(\"token\");\r\n    if (!token) {\r\n      return;\r\n    }\r\n    auth\r\n      .getContent(token)\r\n      .then((res) => {\r\n        if (res) {\r\n          setLoggedIn(true);\r\n          setName(res.name);\r\n          setCurrentUser({ name: res.name, id: res._id });\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        if (err === 401) {\r\n          console.log(\"Переданный токен некорректен\");\r\n        }\r\n      });\r\n  }\r\n\r\n\r\n  function logOut() {\r\n    localStorage.removeItem(\"token\");\r\n    setName(\"\");\r\n    setLoggedIn(false);\r\n    history.push(\"/\");\r\n  }\r\n\r\n  React.useEffect(() => {\r\n    tokenCheck();\r\n    // const articles = localStorage.getItem(\"articles\")\r\n    //   ? JSON.parse(localStorage.getItem(\"articles\"))\r\n    //   : [];\r\n    // setArticles(articles);\r\n    // const keyword = localStorage.getItem('keyword')\r\n    // setKeyword(keyword)\r\n  }, []);\r\n\r\n  function handleSearchNews(keyword) {\r\n    setArticles([]);\r\n    localStorage.removeItem(\"articles\");\r\n    localStorage.removeItem(\"keyword\");\r\n    setPreloader(true);\r\n    setNotFound(false);\r\n    setError(false);\r\n    news\r\n      .getNews(keyword)\r\n      .then((data) => {\r\n        localStorage.setItem(\"articles\", JSON.stringify(data.articles));\r\n        localStorage.setItem(\"keyword\", keyword);\r\n        setArticles(data.articles);\r\n        setKeyword(keyword);\r\n        setPreloader(false);\r\n        setNotFound(false);\r\n        if (data.articles.length === 0) {\r\n          setNotFound(true);\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        setError(true);\r\n      })\r\n      .finally(() => {\r\n        setPreloader(false);\r\n      });\r\n  }\r\n\r\n  function getMySaveNews() {\r\n    if (loggedIn) {\r\n      auth\r\n        .getArticles()\r\n        .then((news) => {\r\n          const arrayMyNews = news.filter((c) => (c.owner === currentUser.id));\r\n          setArticleSaved(arrayMyNews);\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n        });\r\n    }\r\n  }\r\n\r\n  function handleSaveNews({\r\n    keyword, title, text, date, source, link, image,\r\n  }) {\r\n      auth\r\n      .createArticle({\r\n    keyword, title, text, date, source, link, image,\r\n  })\r\n      .then((res) => {\r\n        setArticleSaved([res, ...articleSaved])\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  }\r\n\r\n  function handleArticleDelete(id) {\r\n    auth\r\n      .deleteArticle(id)\r\n      .then(() => {\r\n        const newArticles = articleSaved.filter((c) => c._id !== id);\r\n        setArticleSaved(newArticles);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  }\r\n\r\n  function findMySevedNews({\r\n    keyword, title, text, date, source, link, image,\r\n    article,\r\n    myArticle }) {\r\n        const mySavedArticle = articleSaved.find((c) => {\r\n            if (myArticle) {\r\n                return c.title === myArticle.title && c.text === myArticle.text;\r\n            }\r\n\r\n            if (article) {\r\n                return c.title === article.title && c.text === article.description;\r\n            }\r\n\r\n        });\r\n\r\n        if (mySavedArticle) {\r\n            handleArticleDelete(mySavedArticle._id);\r\n        }\r\n        else {\r\n            handleSaveNews({\r\n    keyword, title, text, date, source, link, image\r\n  });\r\n        }\r\n    }\r\n\r\n    React.useEffect(() => {\r\n        getMySaveNews()\r\n    }, [currentUser.id, loggedIn]);\r\n  \r\n  function handleLoginPopupClick() {\r\n    setIsRegisterPopupOpen(false);\r\n    setIsInfoTooltipOpen(false);\r\n    setIsLoginPopupOpen(true);\r\n  }\r\n\r\n  function handleRegisterPopupClick() {\r\n    setIsLoginPopupOpen(false);\r\n    setIsRegisterPopupOpen(true);\r\n  }\r\n\r\n  function closeAllPopups() {\r\n    setIsLoginPopupOpen(false);\r\n    setIsRegisterPopupOpen(false);\r\n    setIsInfoTooltipOpen(false);\r\n  }\r\n\r\n  useEffect(() => {\r\n    const handleClosePopupEsc = (evt) => {\r\n      const ESC = 27;\r\n      if (evt.keyCode === ESC) {\r\n        closeAllPopups();\r\n      }\r\n    };\r\n    document.addEventListener(\"keydown\", handleClosePopupEsc);\r\n    const handleClosePopupOverlay = (evt) => {\r\n      if (evt.target.classList.contains(\"popup_opened\")) {\r\n        closeAllPopups();\r\n      }\r\n    };\r\n    document.addEventListener(\"click\", handleClosePopupOverlay);\r\n    return () => {\r\n      document.removeEventListener(\"keydown\", handleClosePopupEsc);\r\n      document.addEventListener(\"click\", handleClosePopupOverlay);\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <CurrentUserContext.Provider value={currentUser}>\r\n      <div className=\"App\">\r\n        <Switch>\r\n          <ProtectedRoute exact path=\"/saved-news\" loggedIn={loggedIn} currentUser={currentUser}>\r\n            <Header\r\n              onSignIn={handleLoginPopupClick}\r\n              loggedIn={loggedIn}\r\n              onLogOut={logOut}\r\n              name={name}\r\n            />\r\n            <SavedNewsHeader name={name} articleSaved={articleSaved} />\r\n            <SavedNews\r\n              articles={articles}\r\n              keyword={keyword}\r\n              handleSaveNews={handleSaveNews}\r\n              articleSaved={articleSaved}\r\n              loggedIn={loggedIn}\r\n              onArticleDelete={handleArticleDelete}\r\n              getMySaveNews={getMySaveNews}\r\n            />\r\n            <Footer />\r\n          </ProtectedRoute>\r\n          <Route path=\"/\">\r\n            <div className=\"header-image\">\r\n              <Header\r\n                onSignIn={handleLoginPopupClick}\r\n                loggedIn={loggedIn}\r\n                onLogOut={logOut}\r\n                name={name}\r\n              />\r\n              <SearchForm onSearch={handleSearchNews} />\r\n            </div>\r\n            <Main\r\n              articles={articles}\r\n              keyword={keyword}\r\n              loggedIn={loggedIn}\r\n              articleSaved={articleSaved}\r\n              handleSaveNews={handleSaveNews}\r\n              onArticleDelete={handleArticleDelete}\r\n              findMySevedNews={findMySevedNews}\r\n            />\r\n            {notFound && <NotFound />}\r\n            {preloader && <Preloader />}\r\n            {error && <Error />}\r\n            <About />\r\n            <Footer />\r\n            <Login\r\n              isOpen={isLoginPopupOpen}\r\n              onClose={closeAllPopups}\r\n              onSignUp={handleRegisterPopupClick}\r\n              onLogin={handleLogin}\r\n              errorMessage={errorMessage}\r\n            />\r\n            <Register\r\n              isOpen={isRegisterPopupOpen}\r\n              onClose={closeAllPopups}\r\n              onSignIn={handleLoginPopupClick}\r\n              onRegister={handleRegister}\r\n              errorMessage={errorMessage}\r\n            />\r\n          <InfoPopup\r\n            isOpen={isInfoTooltipOpen}\r\n            onClose={closeAllPopups}\r\n            onSignIn={handleLoginPopupClick}\r\n          />\r\n          </Route>\r\n        </Switch>\r\n      </div>\r\n    </CurrentUserContext.Provider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","C:\\Users\\Дима\\news-explorer-frontend\\src\\components\\About\\About.js",[],"C:\\Users\\Дима\\news-explorer-frontend\\src\\components\\Footer\\Footer.js",[],"C:\\Users\\Дима\\news-explorer-frontend\\src\\components\\Header\\Header.js",[],"C:\\Users\\Дима\\news-explorer-frontend\\src\\components\\Navigation\\Navigation.js",[],"C:\\Users\\Дима\\news-explorer-frontend\\src\\components\\SearchForm\\SearchForm.js",[],"C:\\Users\\Дима\\news-explorer-frontend\\src\\components\\Main\\Main.js",[],"C:\\Users\\Дима\\news-explorer-frontend\\src\\components\\Preloader\\Preloader.js",[],"C:\\Users\\Дима\\news-explorer-frontend\\src\\components\\NewsCardList\\NewsCardList.js",[],"C:\\Users\\Дима\\news-explorer-frontend\\src\\components\\NewsCard\\NewsCard.js",[],"C:\\Users\\Дима\\news-explorer-frontend\\src\\components\\NotFound\\NotFound.js",[],"C:\\Users\\Дима\\news-explorer-frontend\\src\\components\\SavedNews\\SavedNews.js",[],"C:\\Users\\Дима\\news-explorer-frontend\\src\\components\\SavedNewsHeader\\SavedNewsHeader.js",[],"C:\\Users\\Дима\\news-explorer-frontend\\src\\components\\PopupWithForm\\PopupWithForm.js",[],"C:\\Users\\Дима\\news-explorer-frontend\\src\\components\\Login\\Login.js",[],"C:\\Users\\Дима\\news-explorer-frontend\\src\\components\\Register\\Register.js",[],"C:\\Users\\Дима\\news-explorer-frontend\\src\\components\\InfoPopup\\InfoPopup.js",[],"C:\\Users\\Дима\\news-explorer-frontend\\src\\utils\\cards.js",[],["107","108"],"C:\\Users\\Дима\\news-explorer-frontend\\src\\utils\\MainApi.js",[],"C:\\Users\\Дима\\news-explorer-frontend\\src\\components\\ProtectedRoute\\ProtectedRoute.js",[],"C:\\Users\\Дима\\news-explorer-frontend\\src\\context\\CurrentUserContext.js",[],"C:\\Users\\Дима\\news-explorer-frontend\\src\\utils\\NewsApi.js",[],"C:\\Users\\Дима\\news-explorer-frontend\\src\\components\\Error\\Error.js",[],{"ruleId":"109","replacedBy":"110"},{"ruleId":"111","replacedBy":"112"},{"ruleId":"113","severity":1,"message":"114","line":2,"column":25,"nodeType":"115","messageId":"116","endLine":2,"endColumn":33},{"ruleId":"117","severity":1,"message":"118","line":194,"column":54,"nodeType":"119","messageId":"120","endLine":194,"endColumn":56},{"ruleId":"121","severity":1,"message":"122","line":217,"column":8,"nodeType":"123","endLine":217,"endColumn":34,"suggestions":"124"},{"ruleId":"109","replacedBy":"125"},{"ruleId":"111","replacedBy":"126"},"no-native-reassign",["127"],"no-negated-in-lhs",["128"],"no-unused-vars","'Redirect' is defined but never used.","Identifier","unusedVar","array-callback-return","Array.prototype.find() expects a value to be returned at the end of arrow function.","ArrowFunctionExpression","expectedAtEnd","react-hooks/exhaustive-deps","React Hook React.useEffect has a missing dependency: 'getMySaveNews'. Either include it or remove the dependency array.","ArrayExpression",["129"],["127"],["128"],"no-global-assign","no-unsafe-negation",{"desc":"130","fix":"131"},"Update the dependencies array to be: [currentUser.id, getMySaveNews, loggedIn]",{"range":"132","text":"133"},[6337,6363],"[currentUser.id, getMySaveNews, loggedIn]"]